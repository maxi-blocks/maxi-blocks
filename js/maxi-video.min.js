const videoEvents=()=>{document.querySelectorAll(".maxi-video-block").forEach((e=>{if(e.classList.contains("maxi-video-block--youtube"))return void(isScriptMounted("maxi-youtube-sdk")||insertYoutubeScript());const o=e.id,i=void 0!==maxiVideo[0][o]?maxiVideo[0][o]:null,t=e.querySelector(".maxi-video-block__video-player"),n=i.videoType,d=i.embedUrl;"popup"===i.playerType&&popupEvents(t,e,n,d);const a=i.endTime;if("vimeo"===n&&a&&!isScriptMounted("maxi-vimeo-sdk")){const e=document.createElement("script");e.src="https://player.vimeo.com/api/player.js",e.id="maxi-vimeo-sdk",e.async=!0,e.onload=()=>{e.onload=null,handleVimeoVideos()},document.body.appendChild(e)}}))},handleYoutubeVideos=()=>{document.querySelectorAll(".maxi-video-block--youtube").forEach((e=>{const o=e.id,i=void 0!==maxiVideo[0][o]?maxiVideo[0][o]:null,t=e.querySelector("iframe");t.id=`${o}-iframe`,t.src=i.embedUrl;const n=new YT.Player(t.id,{events:{onStateChange:function(e){const{isLoop:o,startTime:t}=i;e.data===YT.PlayerState.ENDED&&o&&n.seekTo(t)}}});"popup"===i.playerType&&popupEvents(n,e,"youtube")}))};function handleVimeoVideos(){document.querySelectorAll(".maxi-video-block--vimeo").forEach((e=>{const o=e.id,i=void 0!==maxiVideo[0][o]?maxiVideo[0][o]:null,t=e.querySelector("iframe");t.src=i.embedUrl;const n=new Vimeo.Player(t),d=i.endTime,a=i.startTime,r=i.isLoop;n.on("timeupdate",(function(e){e.seconds>d&&(r?n.setCurrentTime(a):n.pause())}))}))}function popupEvents(e,o,i,t){const n=o.querySelector(".maxi-video-block__popup-wrapper"),d=o.querySelector(".maxi-video-block__play-button"),a=()=>{n.style.display="flex","youtube"!==i&&(e.src=t)};o.querySelector(".maxi-video-block__overlay").addEventListener("click",a),d.addEventListener("click",a),n.addEventListener("click",(o=>{o.target.classList.contains("maxi-video-block__video-player")||(n.style.display="none","youtube"===i?e.pauseVideo():e.src="")}))}function isScriptMounted(e){return-1!==Array.from(window.document.scripts).findIndex((o=>o.getAttribute("id")===e))}function insertYoutubeScript(){const e=document.createElement("script");e.src="https://www.youtube.com/iframe_api",e.id="maxi-youtube-sdk",document.body.appendChild(e)}function onYouTubeIframeAPIReady(){document.querySelectorAll(".maxi-video-block--youtube").forEach((e=>{const o=e.id,i=void 0!==maxiVideo[0][o]?maxiVideo[0][o]:null,t=e.querySelector("iframe");t.id=`${o}-iframe`,t.src=i.embedUrl;const n=new YT.Player(t.id,{events:{onStateChange:function(e){const{isLoop:o,startTime:t}=i;e.data===YT.PlayerState.ENDED&&o&&n.seekTo(t)}}});"popup"===i.playerType&&popupEvents(n,e,"youtube")}))}window.addEventListener("load",videoEvents);
