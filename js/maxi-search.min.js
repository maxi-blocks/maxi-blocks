const searchEvent = input => {
	const inputValue = input.value;
	const searchUrl = `${window.location.origin}/?s=${inputValue}`;

	window.location.href = searchUrl;
}

const search = () => {
	console.log(maxiSearch[0])

	Object.entries(maxiSearch[0]).forEach(([uniqueID, { iconContent, closeIconContent, skin }]) => {
		const searchBlock = document.getElementById(uniqueID);

		if (!searchBlock) {
			return;
		}

		const button = searchBlock.querySelector('.maxi-search-block__button');
		const buttonIcon = searchBlock.querySelector('.maxi-search-block__button__icon');
		const input = searchBlock.querySelector('.maxi-search-block__input');

		if(skin === 'icon-reveal') {
			button.addEventListener('click', () => {


				if(input.classList.contains('maxi-search-block__input--hidden')) {
					input.classList.remove('maxi-search-block__input--hidden');
					buttonIcon.classList.add('maxi-search-block__button__icon--open', 'maxi-search-block__button__close-icon');
					buttonIcon.classList.remove('maxi-search-block__button__icon--closed');
					buttonIcon.innerHTML = closeIconContent;
				}	else {
					input.classList.add('maxi-search-block__input--hidden');
					buttonIcon.classList.remove('maxi-search-block__button__icon--open');
					buttonIcon.classList.add('maxi-search-block__button__icon--closed');
					buttonIcon.innerHTML = iconContent;
				}
			});

		} else {button.addEventListener('click', () => searchEvent(input));}
		input.addEventListener('keypress', (e) => {
			if (e.key === 'Enter') {
				searchEvent(input);
			}
		});
	});
};

window.addEventListener('load', search);
