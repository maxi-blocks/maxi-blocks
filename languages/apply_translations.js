const fs = require('fs');

const missingPath = 'c:/Users/kyra/maxi-blocks/languages/missing_entries.json';
const poPath = 'c:/Users/kyra/maxi-blocks/languages/maxi-blocks-ja.po';

const translations = {
    "Hover background": "ホバー時の背景",
    "Hover background color": "ホバー時の背景色",
    "Hover background gradient": "ホバー時の背景グラデーション",
    "Hover border": "ホバー時のボーダー",
    "Hover border radius": "ホバー時のボーダー半径",
    "Hover border width": "ホバー時のボーダー幅",
    "Hover content typography": "ホバー時のコンテンツタイポグラフィ",
    "Hover effect": "ホバー効果",
    "Hover effects": "ホバー効果",
    "Hover margin": "ホバー時のマージン",
    "Hover padding": "ホバー時のパディング",
    "Hover title typography": "ホバー時のタイトルタイポグラフィ",
    "Icon background is inherited from button ": "アイコンの背景はボタンから継承されます ",
    "Icon border": "アイコンのボーダー",
    "Icon globals": "アイコングローバル",
    "Icon only (remove text)": "アイコンのみ (テキストを削除)",
    "Icon padding": "アイコンのパディング",
    "Icon path": "アイコンのパス",
    "Icon Size/Spacing": "アイコンサイズ/間隔",
    "Icon stroke": "アイコンのストローク",
    "Icon stroke colour is inherited from button ": "アイコンのストローク色はボタンから継承されます ",
    "Image": "画像",
    "Image accumulator": "画像アキュムレーター",
    "Image width": "画像幅",
    "Import": "インポート",
    "Import completed. ": "インポートが完了しました。",
    "Import completed. You can ": "インポートが完了しました。次は: ",
    "Imported card already exists.": "インポートされたカードは既に存在します。",
    "Importing...": "インポート中...",
    "Imports a custom design for your website's 404 error page.": "ウェブサイトの404エラーページ用のカスタムデザインをインポートします。",
    "Imports the default blog landing page design for your site.": "サイトのデフォルトのブログランディングページデザインをインポートします。",
    "Imports the global footer design for your site.": "サイトのグローバルフッターデザインをインポートします。",
    "Imports the global header design for your site.": "サイトのグローバルヘッダーデザインをインポートします。",
    "In": "イン",
    "In less": "イン (少)",
    "In more": "イン (多)",
    "In some": "イン (中)",
    "Inactive Plugins": "無効なプラグイン",
    "Inherit colour/background from button": "色/背景をボタンから継承",
    "Inherit stroke colour/background from button": "ストローク色/背景をボタンから継承",
    "Insert": "挿入",
    "Insert from Media Library": "メディアライブラリから挿入",
    "install and activate": "インストールして有効化",
    "installing": "インストール中",
    "Installing...": "インストール中...",
    "Italic": "イタリック",
    "Item padding": "アイテムのパディング",
    "Items per page": "ページあたりのアイテム数",
    "Items total": "アイテム合計",
    "Items total: show all": "アイテム合計: すべて表示",
    "Justify content horizontally": "コンテンツを水平方向に正当化",
    "Kannada": "カンナダ語",
    "Kazakh": "カザフ語",
    "Khmer": "クメール語",
    "Kirghiz": "キルギス語",
    "Klingon": "クリンゴン語",
    "Korean": "韓国語",
    "Kurdish": "クルド語",
    "Lao": "ラオ語",
    "Last name": "姓",
    "Latvian": "ラトビア語",
    "layout": "レイアウト",
    "Learn more": "もっと詳しく",
    "Left less": "左 (少)",
    "Left more": "左 (多)",
    "Left some": "左 (中)",
    "Left to right": "左から右",
    "Left: %s": "左: %s",
    "Letter spacing": "文字間隔",
    "Light": "ライト",
    "Light tone globals": "ライトトーングローバル",
    "Limit by current archive posts": "現在のアーカイブ投稿で制限",
    "line": "線",
    "Line height": "行の高さ",
    "Line hover": "ラインホバー",
    "Line radius": "ライン半径",
    "Line through": "取り消し線",
    "Linear": "リニア",
    "Link": "リンク",
    "Link globals": "リンクグローバル",
    "Link target": "リンク先",
    "links": "リンク",
    "Lithuanian": "リトアニア語",
    "Live Demo": "ライブデモ",
    "Live preview": "ライブプレビュー",
    "Load icon library": "アイコンライブラリを読み込む",
    "Load shape library": "シェイプライブラリを読み込む",
    "Logo": "ロゴ",
    "Lowercase": "小文字",
    "Luxembourgish": "ルクセンブルク語",
    "Macedonian": "マケドニア語",
    "Malay": "マレー語",
    "Malay (Malaysia)": "マレー語 (マレーシア)",
    "Malayalam": "マラヤーラム語",
    "Maltese": "マルタ語",
    "Maori": "マオリ語",
    "Marathi": "マラーティー語",
    "Margin": "マージン",
    "Max width": "最大幅",
    "Maxi": "Maxi",
    "MaxiBlocks Plugin": "MaxiBlocksプラグイン",
    "Maximum height": "最大高さ",
    "Maximum width": "最大幅",
    "Media": "メディア",
    "Mime type": "MIMEタイプ",
    "Minimum height": "最小高さ",
    "Minimum width": "最小幅",
    "Mixed": "混合",
    "Mobile": "モバイル",
    "Mongolian": "モンゴル語",
    "Montenegrin": "モンテネグロ語",
    "month in numeric format": "月 (数値)",
    "month in text format": "月 (テキスト)",
    "month in text format, short": "月 (テキスト短縮)",
    "More": "もっと",
    "Move down": "下に移動",
    "Move left": "左に移動",
    "Move right": "右に移動",
    "Move up": "上に移動",
    "Mover": "ムーバー",
    "Must-Use Plugins": "必須プラグイン",
    "Navigation menu globals": "ナビゲーションメニューグローバル",
    "Nepali": "ネパール語",
    "New/old": "新しい/古い",
    "Nickname": "ニックネーム",
    "No background layers added": "背景レイヤーが追加されていません",
    "No content found": "コンテンツが見つかりません",
    "No fields found": "フィールドが見つかりません",
    "No groups found": "グループが見つかりません",
    "No parent": "親なし",
    "No suitable fields found": "適切なフィールドが見つかりません",
    "No wrap": "折り返しなし",
    "none": "なし",
    "Northern Sami": "北サーミ語",
    "Norwegian Bokmål": "ノルウェー語 (ブークモール)",
    "Norwegian Nynorsk": "ノルウェー語 (ニーノシュク)",
    "Not Working": "動作していません",
    "Number Counter": "数値カウンター",
    "Oblique": "斜体",
    "Old/new": "古い/新しい",
    "on canvas hover": "キャンバスホバー時",
    "on hover": "ホバー時",
    "Opacity": "不透明度",
    "Order by": "並び替え順",
    "Origin": "原点",
    "Out": "アウト",
    "Out less": "アウト (少)",
    "Out more": "アウト (多)",
    "Out some": "アウト (中)",
    "Overline": "オーバーライン",
    "Override style card palette": "スタイルカードパレットを上書き",
    "Overwrite mobile navigation breakpoint": "モバイルナビゲーションのブレークポイントを上書き",
    "P": "P",
    "Padding": "パディング",
    "Page": "固定ページ",
    "Pages": "固定ページ",
    "Pages in this starter site": "このスターターサイトのページ",
    "Pagination current": "現在のページネーション",
    "Pagination hover": "ページネーションホバー",
    "Pallet box colour %s": "パレットボックス色 %s",
    "Pane transition": "ペイントランジション",
    "Paragraph": "段落",
    "Paragraph globals": "段落グローバル",
    "Parent": "親",
    "Parent Theme": "親テーマ",
    "Paste nested blocks": "ネストされたブロックを貼り付け",
    "Paste special - select": "形式を選択して貼り付け - 選択",
    "Paste special style": "形式を選択してスタイルを貼り付け",
    "Paste styles - all": "スタイルを貼り付け - すべて",
    "Patterns": "パターン",
    "Patterns in this starter site": "このスターターサイトのパターン",
    "Placeholder image": "プレースホルダー画像",
    "Placeholder text generator": "プレースホルダーテキストジェネレーター",
    "Playground": "プレイグラウンド",
    "Please ": "お願いします ",
    "Plugin Information": "プラグイン情報",
    "Plugin Status": "プラグインステータス",
    "Polish": "ポーランド語",
    "Polygon": "ポリゴン",
    "Portuguese": "ポルトガル語",
    "Portuguese (Brazil)": "ポルトガル語 (ブラジル)",
    "Post": "投稿",
    "Pre": "Pre",
    "Preview for pattern with MaxiBlocks": "MaxiBlocksのパターンプレビュー",
    "Preview, edit or activate style card": "スタイルカードのプレビュー、編集、または有効化",
    "Price": "価格",
    "Price range": "価格帯",
    "Product": "商品",
    "Product categories": "商品カテゴリー",
    "Product tags": "商品タグ",
    "Pseudo": "疑似",
    "Punjabi (India)": "パンジャブ語 (インド)",
    "Purchase code authentication error": "購入コード認証エラー",
    "Purchase code verification failed": "購入コード検証失敗",
    "Push down": "押し下げる",
    "Push left": "左に押す",
    "Push right": "右に押す",
    "Push up": "押し上げる",
    "Quick styles": "クイックスタイル",
    "Radius": "半径",
    "Radius: %s": "半径: %s",
    "Readable": "読み取り可能",
    "Readable/Writable": "読み書き可能",
    "Regular price": "通常価格",
    "Relation": "関係",
    "Remove block": "ブロックを削除",
    "Remove bold": "太字を解除",
    "Remove italic": "イタリックを解除",
    "Remove item underline on hover": "ホバー時にアイテムの下線を削除",
    "Remove strikethrough": "取り消し線を解除",
    "Remove underline": "下線を解除",
    "Replace Icon": "アイコンを置換",
    "Replace icon": "アイコンを置換",
    "Replay": "リプレイ",
    "Reset": "リセット",
    "result": "結果",
    "results": "結果",
    "Returned": "返された",
    "Reusable block name": "再利用ブロック名",
    "Review count": "レビュー数",
    "Right less": "右 (少)",
    "Right more": "右 (多)",
    "Right some": "右 (中)",
    "Right to left": "右から左",
    "Romanian": "ルーマニア語",
    "Rotate": "回転",
    "Russian": "ロシア語",
    "Sale price": "セール価格",
    "Save": "保存",
    "Save and activate now": "保存して今すぐ有効化",
    "Saved": "保存済み",
    "Scale down Fade in less": "スケールダウン フェードイン (少)",
    "Scale out Fade out less": "スケールアウト フェードアウト (少)",
    "Scale up Fade in less": "スケールアップ フェードイン (少)",
    "Search…": "検索...",
    "Select icon": "アイコンを選択",
    "Selected entity": "選択されたエンティティ",
    "Semicolon": "セミコロン",
    "Sentences": "文",
    "Sepia": "セピア",
    "Serbian": "セルビア語",
    "Serbian (Cyrillic)": "セルビア語 (キリル文字)",
    "Set block full-width": "ブロックを全幅に設定",
    "Set custom colour": "カスタム色を設定",
    "Set custom min/max values": "カスタム最小/最大値を設定",
    "Set height to fit content": "コンテンツに合わせて高さを設定",
    "Set width to fit content": "コンテンツに合わせて幅を設定",
    "Set your Image Maxi caption here…": "Image Maxiのキャプションをここに設定...",
    "Shape mask": "シェイプマスク",
    "Short memorable name*": "短くて覚えやすい名前*",
    "Show": "表示",
    "Show mobile menu for all screen sizes": "全画面サイズでモバイルメニューを表示",
    "Show mobile menu for screen sizes down from (px)": "指定サイズ(px)以下でモバイルメニューを表示",
    "Show more text options": "その他のテキストオプションを表示",
    "Show or hide by breakpoint": "ブレークポイントで表示/非表示",
    "Show page list (1, 2, 3, …)": "ページリストを表示 (1, 2, 3, …)",
    "Sideways": "横向き",
    "Sindhi": "シンド語",
    "Sinhala": "シンハラ語",
    "Site": "サイト",
    "Size (px)": "サイズ (px)",
    "SKU": "SKU",
    "Slide down": "スライドダウン",
    "Slide left": "スライド左",
    "Slide right": "スライド右",
    "Slide up": "スライドアップ",
    "Slovak": "スロバキア語",
    "Slovenian": "スロベニア語",
    "Slug": "スラッグ",
    "Sorry, there is no next post, please choose something else.": "申し訳ありませんが、次の投稿はありません。他を選択してください。",
    "Sorry, there is no previous post, please choose something else.": "申し訳ありませんが、前の投稿はありません。他を選択してください。",
    "Sorry, this author has no posts yet, please choose something else.": "申し訳ありませんが、この著者の投稿はまだありません。他を選択してください。",
    "Sorry, you do not have any images yet, please choose something else.": "申し訳ありませんが、画像はまだありません。他を選択してください。",
    "Sorry, you do not have any tags yet, please choose something else.": "申し訳ありませんが、タグはまだありません。他を選択してください。",
    "Space around": "スペースアラウンド",
    "Space between": "スペースビトウィーン",
    "Speed": "速度",
    "Split in/out transitions": "分割イン/アウトトランジション",
    "Static": "静的",
    "Static Text": "静的テキスト",
    "Static text": "静的テキスト",
    "Stop accumulator inheritance": "アキュムレーターの継承を停止",
    "Strikethrough": "取り消し線",
    "Style Card": "スタイルカード",
    "Style card editor": "スタイルカードエディター",
    "Style Card imported successfully as \"%s\"": "スタイルカードは \"%s\" として正常にインポートされました",
    "Style Cards": "スタイルカード",
    "Style cards": "スタイルカード",
    "Style core blocks within Maxi containers": "Maxiコンテナ内のコアブロックのスタイル設定",
    "Subscript": "下付き文字",
    "Superscript": "上付き文字",
    "SVG path": "SVGパス",
    "SVG Path stroke": "SVGパスストローク",
    "SVG path-fill": "SVGパス塗りつぶし",
    "svg's path on canvas hover": "キャンバスホバー時のSVGパス",
    "Swahili": "スワヒリ語",
    "Swati": "スワジ語",
    "Swedish": "スウェーデン語",
    "Switch tone": "トーンを切り替え",
    "Tablet": "タブレット",
    "Tagalog (Philippines)": "タガログ語 (フィリピン)",
    "Tags": "タグ",
    "Tags links": "タグリンク",
    "Tajik": "タジク語",
    "Talossan": "タロッサ語",
    "Tamil": "タミル語",
    "Telugu": "テルグ語",
    "Template": "テンプレート",
    "Templates": "テンプレート",
    "Templates in this starter site": "このスターターサイトのテンプレート",
    "Tetum": "テトゥン語",
    "Text": "テキスト",
    "Text alignment": "テキスト配置",
    "Text custom": "テキストカスタム",
    "Text custom hover": "テキストカスタムホバー",
    "Text decoration": "テキスト装飾",
    "Text direction": "テキスト方向",
    "Text for next link": "次のリンクのテキスト",
    "Text for previous link": "前のリンクのテキスト",
    "Text hover": "テキストホバー",
    "Text level": "テキストレベル",
    "Text orientation": "テキストの向き",
    "Text shadow": "テキストシャドウ",
    "Text size": "テキストサイズ",
    "Text transform": "テキスト変換",
    "Thai": "タイ語",
    "The block should have a wrapper to use flex-child properties": "このブロックには、flex-childプロパティを使用するためのラッパーが必要です",
    "The Code is not valid": "コードが無効です",
    "Theme Directory": "テーマディレクトリ",
    "Theme Information": "テーマ情報",
    "Theme Name": "テーマ名",
    "This type is empty": "このタイプは空です",
    "time": "時間",
    "Title": "タイトル",
    "Toggle all on/off": "すべてオン/オフ切り替え",
    "Top": "上",
    "Top: %1$s Left: %2$s": "上: %1$s 左: %2$s",
    "Top: %s": "上: %s",
    "Total discount": "割引合計",
    "Total fees": "手数料合計",
    "Total fees tax": "手数料消費税合計",
    "Total items": "アイテム合計",
    "Total items tax": "アイテム消費税合計",
    "Total price": "合計金額",
    "Total shipping": "送料合計",
    "Total shipping tax": "送料消費税合計",
    "Total tax": "税金合計",
    "Transition delay": "トランジション遅延",
    "Transition duration": "トランジション時間",
    "Translate": "翻訳",
    "Turkish": "トルコ語",
    "Turkmen": "トルクメン語",
    "Type to search…": "検索するには入力...",
    "Typography": "タイポグラフィ",
    "Ukrainian": "ウクライナ語",
    "Underline": "下線",
    "Underline overline": "下線 オーバーライン",
    "Units": "単位",
    "Unknown error": "不明なエラー",
    "Up": "上",
    "Up less": "上 (少)",
    "Up more": "上 (多)",
    "Up some": "上 (中)",
    "Uppercase": "大文字",
    "Upright": "アップライト",
    "Urdu": "ウルドゥー語",
    "Use background image": "背景画像を使用",
    "Use clip-path": "クリップパスを使用",
    "Use context loop": "コンテキストループを使用",
    "Use dynamic content": "動的コンテンツを使用",
    "Use dynamic content link": "動的コンテンツリンクを使用",
    "Username": "ユーザー名",
    "Uyghur (China)": "ウイグル語 (中国)",
    "Uzbek": "ウズベク語",
    "Uzbek (Latin)": "ウズベク語 (ラテン文字)",
    "Valid": "有効",
    "Validate": "検証",
    "Value is not an object.": "値はオブジェクトではありません。",
    "Version": "バージョン",
    "Vertical align": "垂直配置",
    "Vertical position": "垂直位置",
    "Video opacity": "ビデオ不透明度",
    "Video URL": "ビデオURL",
    "Vietnamese": "ベトナム語",
    "View": "表示",
    "Visited": "訪問済み",
    "Visual": "ビジュアル",
    "Website": "ウェブサイト",
    "White space": "ホワイトスペース",
    "Word Spacing": "単語間隔",
    "WordPress": "WordPress",
    "WordPress AJAX": "WordPress AJAX",
    "Words per sentence": "文あたりの単語数",
    "Working": "動作中",
    "WP Content Directory": "WPコンテンツディレクトリ",
    "WP Debug Mode": "WPデバッグモード",
    "WP Directory": "WPディレクトリ",
    "WP Memory Limit": "WPメモリ制限",
    "WP Plugin Directory": "WPプラグインディレクトリ",
    "WP Themes Directory": "WPテーマディレクトリ",
    "WP Uploads Directory": "WPアップロードディレクトリ",
    "X": "X",
    "Y": "Y",
    "Z": "Z",
    "Z/A": "Z/A",
    "Zoom in": "ズームイン",
    "Zoom out": "ズームアウト",
    "year in short format": "年 (短縮形式)",
    "Yoruba (Nigeria)": "ヨルバ語 (ナイジェリア)",
    "Your size": "あなたのサイズ",
};

if (!fs.existsSync(missingPath)) {
    console.error('Missing entries file not found!');
    process.exit(1);
}

const missing = JSON.parse(fs.readFileSync(missingPath, 'utf8'));
let poContent = fs.readFileSync(poPath, 'utf8').split('\n');
let replacedCount = 0;

missing.forEach(entry => {
    const lineIndex = entry.line - 1; // 0-based
    const msgid = entry.msgid;
    const translation = translations[msgid];

    if (translation) {
        if (poContent[lineIndex].trim() === 'msgstr ""') {
             // We can safely replace
             poContent[lineIndex] = `msgstr "${translation}"`;
             replacedCount++;
        } else {
            console.warn(`Line ${entry.line} is not 'msgstr ""', skipping.`);
        }
    } else {
        // Fallback for unknown: keep empty or mark fuzzy?
        // For now, leave empty but log.
        // console.warn(`No translation for: "${msgid}"`);
    }
});

fs.writeFileSync(poPath, poContent.join('\n'));
console.log(`Successfully updated ${replacedCount} translations in ${poPath}`);
