{"version":3,"sources":["@wordpress/compose/src/higher-order/with-safe-timeout/index.js"],"names":["without","Component","createHigherOrderComponent","withSafeTimeout","OriginalComponent","arguments","timeouts","setTimeout","bind","clearTimeout","forEach","fn","delay","id","push","props"],"mappings":";;;;;;;;;;;;;AAAA;;;AAGA,SAASA,OAAT,QAAwB,QAAxB;AAEA;;;;AAGA,SAASC,SAAT,QAA0B,oBAA1B;AAEA;;;;AAGA,OAAOC,0BAAP,MAAuC,2CAAvC;AAEA;;;;;;;;;AAQA,IAAMC,eAAe,GAAGD,0BAA0B,CAAE,UAAEE,iBAAF,EAAyB;AAC5E;AAAA;;AAAA;;AACC,gCAAc;AAAA;;AAAA;;AACb,iCAAUC,SAAV;AACA,YAAKC,QAAL,GAAgB,EAAhB;AACA,YAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBC,IAAhB,+BAAlB;AACA,YAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,+BAApB;AAJa;AAKb;;AANF;AAAA;AAAA,6CAQwB;AACtB,aAAKF,QAAL,CAAcI,OAAd,CAAuBD,YAAvB;AACA;AAVF;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,kBAYaE,EAZb,EAYiBC,KAZjB,EAYyB;AAAA;;AACvB,YAAMC,EAAE,GAAGN,UAAU,CAAE,YAAM;AAC5BI,UAAAA,EAAE;;AACF,UAAA,MAAI,CAACF,YAAL,CAAmBI,EAAnB;AACA,SAHoB,EAGlBD,KAHkB,CAArB;AAIA,aAAKN,QAAL,CAAcQ,IAAd,CAAoBD,EAApB;AACA,eAAOA,EAAP;AACA,OAnBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,kBAqBeA,EArBf,EAqBoB;AAClBJ,QAAAA,YAAY,CAAEI,EAAF,CAAZ;AACA,aAAKP,QAAL,GAAgBN,OAAO,CAAE,KAAKM,QAAP,EAAiBO,EAAjB,CAAvB;AACA,OAxBF;AAAA;AAAA;AAAA,+BA0BU;AACR,eACC,cAAC,iBAAD,eACM,KAAKE,KADX;AAEC,UAAA,UAAU,EAAG,KAAKR,UAFnB;AAGC,UAAA,YAAY,EAAG,KAAKE;AAHrB,WADD;AAOA;AAlCF;;AAAA;AAAA,IAAsCR,SAAtC;AAoCA,CArCiD,EAqC/C,iBArC+C,CAAlD;AAuCA,eAAeE,eAAf","sourcesContent":["/**\n * External dependencies\n */\nimport { without } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport createHigherOrderComponent from '../../utils/create-higher-order-component';\n\n/**\n * A higher-order component used to provide and manage delayed function calls\n * that ought to be bound to a component's lifecycle.\n *\n * @param {WPComponent} OriginalComponent Component requiring setTimeout\n *\n * @return {WPComponent} Wrapped component.\n */\nconst withSafeTimeout = createHigherOrderComponent( ( OriginalComponent ) => {\n\treturn class WrappedComponent extends Component {\n\t\tconstructor() {\n\t\t\tsuper( ...arguments );\n\t\t\tthis.timeouts = [];\n\t\t\tthis.setTimeout = this.setTimeout.bind( this );\n\t\t\tthis.clearTimeout = this.clearTimeout.bind( this );\n\t\t}\n\n\t\tcomponentWillUnmount() {\n\t\t\tthis.timeouts.forEach( clearTimeout );\n\t\t}\n\n\t\tsetTimeout( fn, delay ) {\n\t\t\tconst id = setTimeout( () => {\n\t\t\t\tfn();\n\t\t\t\tthis.clearTimeout( id );\n\t\t\t}, delay );\n\t\t\tthis.timeouts.push( id );\n\t\t\treturn id;\n\t\t}\n\n\t\tclearTimeout( id ) {\n\t\t\tclearTimeout( id );\n\t\t\tthis.timeouts = without( this.timeouts, id );\n\t\t}\n\n\t\trender() {\n\t\t\treturn (\n\t\t\t\t<OriginalComponent\n\t\t\t\t\t{ ...this.props }\n\t\t\t\t\tsetTimeout={ this.setTimeout }\n\t\t\t\t\tclearTimeout={ this.clearTimeout }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t};\n}, 'withSafeTimeout' );\n\nexport default withSafeTimeout;\n"]}