body .maxi-background-control {
	/*-------------------------------------------
	  COMPONENT VARIABLES
	-------------------------------------------*/
	--bg-layer-spacing: var(--maxi-space-3px);
	--bg-button-radius: var(--maxi-radius-4px);
	--bg-border-style: var(--maxi-border-1px) solid var(--maxi-grey-light);
	--bg-selected-border: var(--maxi-border-1px) solid var(--maxi-primary-color);
	--bg-secondary-border: var(--maxi-border-1px) solid
		var(--maxi-secondary-color);
	--bg-layer-preview-size: var(--maxi-space-20px);
	--bg-transition-standard: all var(--maxi-transition-400ms) ease;

	/*-------------------------------------------
	  SHARED PATTERNS
	-------------------------------------------*/

	// Flexbox center pattern
	%flex-center-pattern {
		display: var(--maxi-display-flex);
		align-items: var(--maxi-layout-center);
	}

	// Tab button base pattern
	%tab-button-base {
		border: var(--bg-border-style);
		border-radius: var(--bg-button-radius);
		padding: var(--maxi-space-10px);
		transition: var(--bg-transition-standard);
		background-color: var(--maxi-white);
		color: var(--maxi-grey-dark);

		&.maxi-tabs-control__button--selected {
			background-color: var(--maxi-pastel-green);
			border: var(--bg-selected-border);
		}
	}

	// SVG icon pattern for selected states
	%svg-selected-fill {
		svg path,
		svg circle {
			fill: var(--maxi-secondary-color);
		}
	}

	// SVG icon pattern for stroke styles
	%svg-selected-stroke {
		svg path,
		svg circle {
			stroke: var(--maxi-secondary-color);
		}
	}

	padding-top: var(--maxi-space-8px);
	.maxi-tabs-control__full-width {
		column-gap: var(--maxi-space-5px);
		.maxi-tabs-control__button {
			&-none,
			&-color,
			&-gradient {
				@extend %tab-button-base;
			}
			&-none,
			&-color {
				&.maxi-tabs-control__button--selected {
					@extend %svg-selected-fill;
				}
			}
			&-gradient {
				&.maxi-tabs-control__button--selected {
					@extend %svg-selected-stroke;
				}
			}
		}
	}

	&__image-layer .maxi-toggle-switch {
		padding-top: var(--maxi-space-10px);
		margin-bottom: var(--bg-layer-spacing) !important;
	}
	.parallax-direction {
		.maxi-tabs-control__button {
			border: var(--bg-border-style);
			border-radius: var(--maxi-radius-2px);
			color: var(--maxi-grey-dark);
			background-color: var(--maxi-white);
			width: var(--maxi-element-size-48px);
			transition: var(--bg-transition-standard) !important;

			&[aria-pressed='true'],
			&:active,
			&:hover {
				background-color: var(--maxi-whisper-green);
				color: var(--maxi-secondary-color);
				border: var(--bg-selected-border);
			}
		}
	}
	.maxi-mediauploader-control {
		&__image {
			.maxi-mediauploader-control__remove {
				margin-right: var(--maxi-space-0px);
			}
		}
	}
	.maxi-background-control__add-layer {
		margin-top: var(--maxi-space-0px) !important;
		.maxi-base-control__field {
			margin-bottom: var(--bg-layer-spacing) !important;
		}
	}
	.maxi-background-layer {
		&__preview {
			display: var(--maxi-display-block);
			width: var(--bg-layer-preview-size);
			height: var(--bg-layer-preview-size);
			margin: var(--bg-layer-spacing) var(--maxi-space-5px)
				var(--maxi-space-0px) var(--maxi-space-0px) !important;
			border: var(--maxi-border-1px) solid var(--maxi-black);
			opacity: var(--maxi-opacity-visible);
			float: var(--maxi-float-left);
			border-radius: var(--maxi-radius-0);
			margin-right: var(--bg-layer-spacing);
			background-size: cover !important;

			svg {
				display: var(--maxi-display-block);
				max-width: var(--maxi-space-21px);
				max-height: var(--maxi-space-21px);
				margin: var(--maxi-layout-auto);
			}
		}
		&__row {
			margin: var(--maxi-space-0px) var(--maxi-space-0px)
				var(--maxi-space-8px);
			@extend %flex-center-pattern;
			border: var(--bg-secondary-border);
			z-index: var(--maxi-z-base);

			.maxi-background-layer__title__text {
				@extend %flex-center-pattern;
				min-height: var(--maxi-space-25px);
				/* Keep the title on one line and gracefully truncate when space is tight */
				white-space: var(--maxi-white-space-nowrap);
				overflow: var(--maxi-overflow-hidden);
				text-overflow: ellipsis;
				/* Allow flexbox to shrink this item */
				min-width: var(--maxi-layout-zero);
			}
		}

		&__content {
			border: var(--bg-secondary-border);
			border-radius: var(--maxi-radius-0);
			padding: var(--maxi-space-22px) var(--maxi-space-8px)
				var(--maxi-space-0px);
			margin: calc(-1 * var(--maxi-space-23px))
				calc(-1 * var(--maxi-space-8px)) var(--maxi-space-8px);

			.chrome-picker {
				width: var(--maxi-layout-full-width) !important;
			}

			.maxi-library-modal__action-section {
				margin-bottom: var(--maxi-space-8px);
			}

			.components-custom-gradient-picker__gradient-bar {
				margin-top: var(--maxi-space-0px);
				margin-bottom: var(--maxi-space-8px);
			}

			.components-custom-gradient-picker__ui-line {
				margin-bottom: var(--maxi-space-0px);

				.components-input-control__container:hover {
					border-color: var(--maxi-primary-color) !important;
				}
			}
		}

		&__title {
			&__text {
				line-height: var(--maxi-space-25px);
			}
			&__mover {
				display: var(--maxi-display-block);
				width: var(--maxi-space-17px);
				height: var(--maxi-space-17px);
				/* Slightly reduce right spacing to free room for the title */
				margin: var(--maxi-layout-auto) var(--maxi-space-2px)
					var(--maxi-layout-auto) var(--maxi-layout-auto);
				cursor: var(--maxi-cursor-move);

				svg {
					width: var(--maxi-space-15px);
					height: var(--maxi-space-15px);
					path {
						fill: var(--maxi-black);
					}
				}
			}
			&__display {
				display: var(--maxi-display-block);
				width: var(--maxi-space-22px);
				height: var(--maxi-space-22px);
				/* Reduce horizontal margins to gain extra width for the text */
				margin: var(--maxi-layout-auto) var(--bg-layer-spacing)
					var(--maxi-layout-auto) var(--bg-layer-spacing);
				cursor: var(--maxi-cursor-pointer);
				position: var(--maxi-layout-relative);
				transition: var(--bg-transition-standard);

				&:hover {
					transform: scale(1.1);
					opacity: var(--maxi-opacity-medium);
				}
				svg {
					width: var(--maxi-space-22px);
					height: var(--maxi-space-22px);
				}

				&--block {
					path {
						stroke: var(--maxi-black);
					}
				}
				&:after {
					content: '';
					display: var(--maxi-display-block);
					background-color: var(--maxi-grey-dark);
					width: var(--maxi-layout-zero);
					height: var(--maxi-space-1px);
					position: var(--maxi-layout-absolute);
					top: var(--maxi-layout-half);
					left: var(--maxi-layout-half);
					transform: translate(-50%, -50%)
						var(--maxi-transform-rotate-45deg);
					transition: var(--maxi-transition-300ms);
				}
				&--none {
					opacity: var(--maxi-opacity-semi);
					&:after {
						width: var(--maxi-space-23px);
					}
					path {
						stroke: var(--maxi-grey-dark);
					}
				}
			}
		}
	}

	.maxi-list-item-control__arrow {
		width: var(--maxi-space-25px);
		transition: var(--maxi-transition-300ms) ease all;
		cursor: var(--maxi-cursor-pointer);
		transform-origin: var(--maxi-layout-center);
		padding: var(--maxi-space-6px) var(--maxi-space-0px);
		border-right: var(--bg-secondary-border);
		background-color: var(--maxi-white);
		text-align: var(--maxi-text-align-center) !important;
		border-radius: var(--maxi-radius-5px) var(--maxi-space-0px)
			var(--maxi-space-0px) var(--maxi-radius-5px) !important;

		svg {
			width: var(--maxi-space-8px);
			height: var(--maxi-space-16px);
			transform: rotate(-90deg);
			path {
				fill: var(--maxi-black);
			}
		}
	}

	.maxi-list-item-control__title__id:before {
		content: counter(list-items-counter);
		background: var(--maxi-whisper-green);
		display: var(--maxi-display-block);
		/* Tighter padding to allow the title to fit on one line */
		padding: var(--maxi-space-6px) var(--maxi-space-5px) !important;
		border-right: var(--bg-secondary-border);
		margin-right: var(--bg-layer-spacing) !important;
		counter-increment: list-items-counter 1;
		font-size: var(--maxi-font-size-14px);
		font-weight: var(--maxi-font-weight-bold);
		min-width: var(--maxi-space-22px);
	}
}

/*-------------------------------------------
  PARALLAX DIRECTION EXTENDED STYLES
-------------------------------------------*/
.parallax-direction .maxi-tabs-control__button {
	position: var(--maxi-layout-relative);
	display: var(--maxi-display-flex);
	flex-direction: var(--maxi-layout-flex-column);
	width: var(--maxi-layout-full-width);
	height: var(--maxi-layout-auto);
	padding: var(--maxi-space-8px) var(--maxi-space-30px) !important;
	border-bottom: var(--bg-border-style);
	border-top: var(--bg-border-style);
	border-right: var(--bg-border-style);
	border-radius: var(--maxi-radius-0);
	color: var(--maxi-grey-dark);
	background-color: var(--maxi-white);
	text-align: var(--maxi-text-align-center);

	&:last-child {
		border-right: var(--maxi-reset-border-none);
		margin-left: var(--maxi-space-8px) !important;
	}

	&:first-child {
		margin-right: var(--maxi-space-4px) !important;
	}

	&:hover {
		background-color: var(--maxi-grey-light);
		cursor: var(--maxi-cursor-pointer);
	}

	&:focus:not(:disabled) {
		box-shadow: var(--maxi-reset-box-shadow);
		outline: var(--maxi-reset-outline);
	}

	&:active {
		background-color: var(--maxi-grey-light);
	}
}

/*-------------------------------------------
  POPOVER BUTTON STYLING
-------------------------------------------*/
body.maxi-blocks--active .components-popover__fallback-container {
	button.components-button.is-link {
		height: var(--maxi-space-30px);
		border: var(--maxi-border-1-5px) solid var(--maxi-secondary-color);
		color: var(--maxi-secondary-color) !important;
		background: var(--maxi-whisper-green);
		border-radius: var(--maxi-space-30px);
		text-decoration: var(--maxi-text-decoration-none);
		padding: var(--maxi-space-0px) var(--maxi-space-10px);
		transition: all var(--maxi-transition-500ms) ease-in-out;

		&:hover {
			border-color: var(--maxi-primary-color) !important;
			background: var(--maxi-mid-green);
		}
	}
}
