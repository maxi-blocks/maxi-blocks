{"version":3,"sources":["@wordpress/compose/src/hooks/use-dragging/index.js"],"names":["useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","useDragging","onDragStart","onDragMove","onDragEnd","isDragging","setIsDragging","eventsRef","current","onMouseMove","endDrag","document","removeEventListener","startDrag","addEventListener"],"mappings":";;;;;;;;;;;AAGA;;AAHA;;;AAWA,IAAMA,yBAAyB,GAC9B,OAAOC,MAAP,KAAkB,WAAlB,GAAgCC,wBAAhC,GAAkDC,kBADnD;;AAGe,SAASC,WAAT,OAA+D;AAAA,MAAvCC,WAAuC,QAAvCA,WAAuC;AAAA,MAA1BC,UAA0B,QAA1BA,UAA0B;AAAA,MAAdC,SAAc,QAAdA,SAAc;;AAAA,kBACvC,uBAAU,KAAV,CADuC;AAAA;AAAA,MACrEC,UADqE;AAAA,MACzDC,aADyD;;AAG7E,MAAMC,SAAS,GAAG,qBAAQ;AACzBL,IAAAA,WAAW,EAAXA,WADyB;AAEzBC,IAAAA,UAAU,EAAVA,UAFyB;AAGzBC,IAAAA,SAAS,EAATA;AAHyB,GAAR,CAAlB;AAKAP,EAAAA,yBAAyB,CAAE,YAAM;AAChCU,IAAAA,SAAS,CAACC,OAAV,CAAkBN,WAAlB,GAAgCA,WAAhC;AACAK,IAAAA,SAAS,CAACC,OAAV,CAAkBL,UAAlB,GAA+BA,UAA/B;AACAI,IAAAA,SAAS,CAACC,OAAV,CAAkBJ,SAAlB,GAA8BA,SAA9B;AACA,GAJwB,EAItB,CAAEF,WAAF,EAAeC,UAAf,EAA2BC,SAA3B,CAJsB,CAAzB;AAMA,MAAMK,WAAW,GAAG,0BACnB;AAAA;;AAAA,WACCF,SAAS,CAACC,OAAV,CAAkBL,UAAlB,IACA,sBAAAI,SAAS,CAACC,OAAV,EAAkBL,UAAlB,qCAFD;AAAA,GADmB,EAInB,EAJmB,CAApB;AAMA,MAAMO,OAAO,GAAG,0BAAa,YAAe;AAC3C,QAAKH,SAAS,CAACC,OAAV,CAAkBJ,SAAvB,EAAmC;AAAA;;AAClC,6BAAAG,SAAS,CAACC,OAAV,EAAkBJ,SAAlB;AACA;;AACDO,IAAAA,QAAQ,CAACC,mBAAT,CAA8B,WAA9B,EAA2CH,WAA3C;AACAE,IAAAA,QAAQ,CAACC,mBAAT,CAA8B,SAA9B,EAAyCF,OAAzC;AACAJ,IAAAA,aAAa,CAAE,KAAF,CAAb;AACA,GAPe,EAOb,EAPa,CAAhB;AAQA,MAAMO,SAAS,GAAG,0BAAa,YAAe;AAC7C,QAAKN,SAAS,CAACC,OAAV,CAAkBN,WAAvB,EAAqC;AAAA;;AACpC,6BAAAK,SAAS,CAACC,OAAV,EAAkBN,WAAlB;AACA;;AACDS,IAAAA,QAAQ,CAACG,gBAAT,CAA2B,WAA3B,EAAwCL,WAAxC;AACAE,IAAAA,QAAQ,CAACG,gBAAT,CAA2B,SAA3B,EAAsCJ,OAAtC;AACAJ,IAAAA,aAAa,CAAE,IAAF,CAAb;AACA,GAPiB,EAOf,EAPe,CAAlB,CA5B6E,CAqC7E;;AACA,0BAAW,YAAM;AAChB,WAAO,YAAM;AACZ,UAAKD,UAAL,EAAkB;AACjBM,QAAAA,QAAQ,CAACC,mBAAT,CAA8B,WAA9B,EAA2CH,WAA3C;AACAE,QAAAA,QAAQ,CAACC,mBAAT,CAA8B,SAA9B,EAAyCF,OAAzC;AACA;AACD,KALD;AAMA,GAPD,EAOG,CAAEL,UAAF,CAPH;AASA,SAAO;AACNQ,IAAAA,SAAS,EAATA,SADM;AAENH,IAAAA,OAAO,EAAPA,OAFM;AAGNL,IAAAA,UAAU,EAAVA;AAHM,GAAP;AAKA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport {\n\tuseCallback,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseState,\n} from '@wordpress/element';\n\nconst useIsomorphicLayoutEffect =\n\ttypeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\nexport default function useDragging( { onDragStart, onDragMove, onDragEnd } ) {\n\tconst [ isDragging, setIsDragging ] = useState( false );\n\n\tconst eventsRef = useRef( {\n\t\tonDragStart,\n\t\tonDragMove,\n\t\tonDragEnd,\n\t} );\n\tuseIsomorphicLayoutEffect( () => {\n\t\teventsRef.current.onDragStart = onDragStart;\n\t\teventsRef.current.onDragMove = onDragMove;\n\t\teventsRef.current.onDragEnd = onDragEnd;\n\t}, [ onDragStart, onDragMove, onDragEnd ] );\n\n\tconst onMouseMove = useCallback(\n\t\t( ...args ) =>\n\t\t\teventsRef.current.onDragMove &&\n\t\t\teventsRef.current.onDragMove( ...args ),\n\t\t[]\n\t);\n\tconst endDrag = useCallback( ( ...args ) => {\n\t\tif ( eventsRef.current.onDragEnd ) {\n\t\t\teventsRef.current.onDragEnd( ...args );\n\t\t}\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove );\n\t\tdocument.removeEventListener( 'mouseup', endDrag );\n\t\tsetIsDragging( false );\n\t}, [] );\n\tconst startDrag = useCallback( ( ...args ) => {\n\t\tif ( eventsRef.current.onDragStart ) {\n\t\t\teventsRef.current.onDragStart( ...args );\n\t\t}\n\t\tdocument.addEventListener( 'mousemove', onMouseMove );\n\t\tdocument.addEventListener( 'mouseup', endDrag );\n\t\tsetIsDragging( true );\n\t}, [] );\n\n\t// Remove the global events when unmounting if needed.\n\tuseEffect( () => {\n\t\treturn () => {\n\t\t\tif ( isDragging ) {\n\t\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove );\n\t\t\t\tdocument.removeEventListener( 'mouseup', endDrag );\n\t\t\t}\n\t\t};\n\t}, [ isDragging ] );\n\n\treturn {\n\t\tstartDrag,\n\t\tendDrag,\n\t\tisDragging,\n\t};\n}\n"]}