class Parallax{constructor(t,e){this.wrapperEl=t,this.imgEl=t.querySelector("img"),this.getIsMobile(),this.getWinValues(),this.getOptions(e),this.init()}getIsMobile(){this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}getDeviceHeight(){return this.deviceHelper,!this.deviceHelper&&document.body&&(this.deviceHelper=document.createElement("div"),this.deviceHelper.style.cssText="position: fixed; top: -9999px; left: 0; height: 100vh; width: 0;",document.body.appendChild(this.deviceHelper)),(this.deviceHelper?this.deviceHelper.clientHeight:0)||window.innerHeight||document.documentElement.clientHeight}getWinValues(){this.winValues={width:window.innerWidth||document.documentElement.clientWidth,height:this.isMobile?this.getDeviceHeight():window.innerHeight||document.documentElement.clientHeight,y:window.pageYOffset}}getBoundingClientRect(t){const{top:e,right:i,bottom:s,left:n,width:o,height:l,x:r,y:a}=t.getBoundingClientRect();return{top:e,right:i,bottom:s,left:n,width:o,height:l,x:r,y:a}}getOptions(t){const e=this.getBoundingClientRect(this.wrapperEl),i=this.getBoundingClientRect(this.imgEl);this.options={general:{...this.options?.general,...t&&{speed:t}},wrapper:{...e,styles:this.getWrapperStyles(e)},img:{...i,styles:this.getImgStyles(e)}}}getWrapperStyles(t){if(!this.options)return null;const{width:e,height:i}=t??this.options.wrapper;return`\n\t\t clip: rect(0 ${e}px ${i}px 0);\n\t\t clip: rect(0, ${e}px, ${i}px, 0);\n\t `.trim()}getImgStyles(t){if(!this.options)return null;const{height:e}=this.winValues,{speed:i}=this.options.general,{height:s,width:n,left:o,top:l}=t??this.options.wrapper;let r=0;i<0?(r=i*Math.max(s,e),e<s&&(r-=i*(s-e))):r=i*(s+e);let a=s;return i>1?a=Math.abs(r-e):i<0?a=r/i+Math.abs(r):a+=(e-s)*(1-i),r/=2,`\n\t\t height: ${a}px;\n\t\t margin-top: ${(e-a)/2}px;\n\t\t left: ${o}px;\n\t\t width: ${n}px;\n\t\t transform: translate3d(0,${r*(1-(e-l)/(e+s)*2)}px,0);\n\t `.trim()}getIsInViewport(){const{wrapper:{bottom:t,right:e,top:i,left:s}}=this.options,{height:n,width:o}=this.winValues;return t>=0&&e>=0&&i<=n&&s<=o}init(){this.onResize(),this.onScroll(),window.addEventListener("resize",this.onResize.bind(this)),window.addEventListener("orientationchange",this.onResize.bind(this)),window.addEventListener("scroll",this.onScroll.bind(this))}onResize(){this.getOptions(),this.getIsMobile(),this.getWinValues(),this.getIsInViewport()&&(this.wrapperClip(),this.imgStyles())}onScroll(){this.getOptions(),this.getIsMobile(),this.getWinValues(),this.getIsInViewport()&&this.imgStyles()}wrapperClip(){this.wrapperEl.style.cssText=this.options.wrapper.styles}imgStyles(){this.imgEl.style.cssText=this.options.img.styles}}const parallaxElements=document.querySelectorAll(".maxi-parallax-effect");parallaxElements.forEach((t=>{if(!maxi_custom_data.custom_data)return;const e=t.id,i=void 0!==maxi_custom_data.custom_data[e]?maxi_custom_data.custom_data[e]:null;null!==i&&"bgParallaxLayers"in i&&i.bgParallaxLayers.forEach((t=>{const{id:i,"background-image-parallax-speed":s,"background-image-parallax-direction":n}=t,o=document.querySelector(`#${e} > .maxi-background-displayer > .maxi-background-displayer__${i}`),l=s/10+("up"===n?1:-1);window.addEventListener("scroll",(()=>{new Parallax(o,l)}))}))}));
