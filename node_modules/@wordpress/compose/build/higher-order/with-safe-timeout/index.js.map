{"version":3,"sources":["@wordpress/compose/src/higher-order/with-safe-timeout/index.js"],"names":["withSafeTimeout","OriginalComponent","arguments","timeouts","setTimeout","bind","clearTimeout","forEach","fn","delay","id","push","props","Component"],"mappings":";;;;;;;;;AAQA;;;;;;;;;;;;;;;;AALA;;AAUA;;AAbA;;;;AAKA;;;;AAKA;;;;AAKA;;;;;;;;AAQA,IAAMA,eAAe,GAAG,yCAA4B,UAAEC,iBAAF,EAAyB;AAC5E;AAAA;AAAA;AAAA;;AACC,kCAAc;AAAA;;AAAA;AACb,2HAAUC,SAAV;AACA,cAAKC,QAAL,GAAgB,EAAhB;AACA,cAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBC,IAAhB,6CAAlB;AACA,cAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,6CAApB;AAJa;AAKb;;AANF;AAAA;AAAA,+CAQwB;AACtB,eAAKF,QAAL,CAAcI,OAAd,CAAuBD,YAAvB;AACA;AAVF;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,oBAYaE,EAZb,EAYiBC,KAZjB,EAYyB;AAAA;;AACvB,cAAMC,EAAE,GAAGN,UAAU,CAAE,YAAM;AAC5BI,YAAAA,EAAE;;AACF,YAAA,MAAI,CAACF,YAAL,CAAmBI,EAAnB;AACA,WAHoB,EAGlBD,KAHkB,CAArB;AAIA,eAAKN,QAAL,CAAcQ,IAAd,CAAoBD,EAApB;AACA,iBAAOA,EAAP;AACA,SAnBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,oBAqBeA,EArBf,EAqBoB;AAClBJ,UAAAA,YAAY,CAAEI,EAAF,CAAZ;AACA,eAAKP,QAAL,GAAgB,qBAAS,KAAKA,QAAd,EAAwBO,EAAxB,CAAhB;AACA,SAxBF;AAAA;AAAA;AAAA,iCA0BU;AACR,iBACC,4BAAC,iBAAD,6BACM,KAAKE,KADX;AAEC,YAAA,UAAU,EAAG,KAAKR,UAFnB;AAGC,YAAA,YAAY,EAAG,KAAKE;AAHrB,aADD;AAOA;AAlCF;AAAA;AAAA,MAAsCO,kBAAtC;AAAA;AAoCA,CArCuB,EAqCrB,iBArCqB,CAAxB;eAuCeb,e","sourcesContent":["/**\n * External dependencies\n */\nimport { without } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport createHigherOrderComponent from '../../utils/create-higher-order-component';\n\n/**\n * A higher-order component used to provide and manage delayed function calls\n * that ought to be bound to a component's lifecycle.\n *\n * @param {WPComponent} OriginalComponent Component requiring setTimeout\n *\n * @return {WPComponent} Wrapped component.\n */\nconst withSafeTimeout = createHigherOrderComponent( ( OriginalComponent ) => {\n\treturn class WrappedComponent extends Component {\n\t\tconstructor() {\n\t\t\tsuper( ...arguments );\n\t\t\tthis.timeouts = [];\n\t\t\tthis.setTimeout = this.setTimeout.bind( this );\n\t\t\tthis.clearTimeout = this.clearTimeout.bind( this );\n\t\t}\n\n\t\tcomponentWillUnmount() {\n\t\t\tthis.timeouts.forEach( clearTimeout );\n\t\t}\n\n\t\tsetTimeout( fn, delay ) {\n\t\t\tconst id = setTimeout( () => {\n\t\t\t\tfn();\n\t\t\t\tthis.clearTimeout( id );\n\t\t\t}, delay );\n\t\t\tthis.timeouts.push( id );\n\t\t\treturn id;\n\t\t}\n\n\t\tclearTimeout( id ) {\n\t\t\tclearTimeout( id );\n\t\t\tthis.timeouts = without( this.timeouts, id );\n\t\t}\n\n\t\trender() {\n\t\t\treturn (\n\t\t\t\t<OriginalComponent\n\t\t\t\t\t{ ...this.props }\n\t\t\t\t\tsetTimeout={ this.setTimeout }\n\t\t\t\t\tclearTimeout={ this.clearTimeout }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t};\n}, 'withSafeTimeout' );\n\nexport default withSafeTimeout;\n"]}