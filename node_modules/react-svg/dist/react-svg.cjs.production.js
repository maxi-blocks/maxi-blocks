"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var _objectWithoutPropertiesLoose=_interopDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose")),_inheritsLoose=_interopDefault(require("@babel/runtime/helpers/inheritsLoose")),svgInjector=require("@tanem/svg-injector"),React=require("react"),ReactDOMServer=_interopDefault(require("react-dom/server")),shallowDiffers=function(e,t){for(var r in e)if(!(r in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1},ReactSVG=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).initialState={hasError:!1,isLoading:!0},t.state=t.initialState,t._isMounted=!1,t.refCallback=function(e){t.container=e},t}_inheritsLoose(t,e);var r=t.prototype;return r.renderSVG=function(){var e=this;if(this.container instanceof Node){var t=this.props,r=t.beforeInjection,n=t.evalScripts,i=t.renumerateIRIElements,o=t.src,a=this.props.afterInjection,s=this.props.wrapper,c=document.createElement(s);c.innerHTML=ReactDOMServer.renderToStaticMarkup(React.createElement(s,null,React.createElement(s,{"data-src":o}))),this.svgWrapper=this.container.appendChild(c.firstChild);svgInjector.SVGInjector(this.svgWrapper.firstChild,{afterEach:function(t,r){t&&e.removeSVG(),e._isMounted&&e.setState((function(){return{hasError:!!t,isLoading:!1}}),(function(){a(t,r)}))},beforeEach:r,evalScripts:n,renumerateIRIElements:i})}},r.removeSVG=function(){this.container instanceof Node&&this.svgWrapper instanceof Node&&(this.container.removeChild(this.svgWrapper),this.svgWrapper=null)},r.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},r.componentDidUpdate=function(e){var t=this;shallowDiffers(e,this.props)&&this.setState((function(){return t.initialState}),(function(){t.removeSVG(),t.renderSVG()}))},r.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},r.render=function(){var e=this.props,t=e.fallback,r=e.loading,n=e.wrapper,i=_objectWithoutPropertiesLoose(e,["afterInjection","beforeInjection","evalScripts","fallback","loading","renumerateIRIElements","src","wrapper"]);return React.createElement(n,Object.assign({},i,{ref:this.refCallback}),this.state.isLoading&&r&&React.createElement(r,null),this.state.hasError&&t&&React.createElement(t,null))},t}(React.Component);ReactSVG.defaultProps={afterInjection:function(){},beforeInjection:function(){},evalScripts:"never",fallback:null,loading:null,renumerateIRIElements:!0,wrapper:"div"},exports.ReactSVG=ReactSVG;
//# sourceMappingURL=react-svg.cjs.production.js.map
