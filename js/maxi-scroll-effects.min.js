class ScrollEffects{constructor(){this.scrollData=this.getElements(),this.init()}init(){this.startingEffect(),this.effectsOnScroll(),document.addEventListener("DOMContentLoaded",[this.getElements.bind(this),this.startingEffect.bind(this)]),window.addEventListener("scroll",this.effectsOnScroll.bind(this))}getElements=()=>{const t={};return Array.from(document.querySelectorAll("[data-scroll-effect-type]")).forEach((e=>{const{id:s}=e;t[s]={};const a=e?.getAttribute("data-scroll-effect-type"),r=a?.trim()?.split(" ");r.forEach((a=>{t[s][a]=this.getScrollData(e,a)}))})),t};setTransform=(t,e,s)=>{const a=t.style.transform;if(null==a)return t.style.transform=e,t.style.WebkitTransform=e,null;const r=a.split(") ");return r.map(((t,e)=>(t.includes(s)&&r.splice(e,1),null))),t.style.transform=r.join(" ")+e,t.style.WebkitTransform=r.join(" ")+e,null};setOpacity=(t,e)=>{t.style.opacity=e};setBlur=(t,e)=>{t.style.filter=`blur(${e})`};setVertical=(t,e)=>{t.style.top=`${e}px`};setHorizontal=(t,e)=>{t.style.left=`${e}px`};applyStyle(t,e,s){switch(e){case"rotate":this.setTransform(t,`rotate(${s}deg)`,"rotate");break;case"fade":this.setOpacity(t,`${s}%`);break;case"scale":this.setTransform(t,`scale3d(${s}%, ${s}%, ${s}%)`,"scale");break;case"blur":this.setBlur(t,`${s}px`);break;case"vertical":this.setVertical(t,s);break;case"horizontal":this.setHorizontal(t,s)}return null}getScrollSetting=t=>{const e={},s=t.trim().split(" ");return e.speedValue=parseFloat(s[0])||200,e.delayValue=parseFloat(s[1])||0,e.easingValue=s[2]||"ease",e.trigger=(t=>{switch(t){case"top":return 100;case"mid":return 50;default:return 0}})(s[3]),e.reverseScroll=s[4]||!0,e.start=parseInt(s[5]),e.mid=parseInt(s[6]),e.end=parseInt(s[7]),e};getScrollData=(t,e)=>t.getAttribute(`data-scroll-effect-${e}-general`);startingTransform(t,e){const s=this.getScrollData(t,e);if(!s||!t)return null;const{start:a}=this.getScrollSetting(s);return this.applyStyle(t,e,a),null}getScrollDirection=()=>{let t=0;const e=window.pageYOffset;return t<e?(t=e,"down"):t>=e?(t=e,"up"):0};scrollTransform=(t,e)=>{let s=0,a=0,r=0,l=0;const n=this.getScrollData(t,e);if(!n)return;const{trigger:c,start:i,mid:o,end:h,reverseScroll:f}=this.getScrollSetting(n),u=t.getBoundingClientRect(),d=window.innerHeight,b=d/2,g=t.offsetHeight/2;let m=0;switch(c){case 50:m=b;break;case 0:m=d}let p=Math.round(u.top),y=Math.round(u.bottom);0!==m&&(p-=m,y-=m);const M=Math.round(p+g),S=this.getScrollDirection();if("down"===S&&p<=0)if(a=0,s=0,M>=0){const s=Math.abs((Math.abs(i)-Math.abs(o))/g);i<o?r+=s:r-=s;const a=Math.abs(Math.trunc(i+r))<o?Math.trunc(i+r):o;this.applyStyle(t,e,a)}else{const s=Math.abs((Math.abs(h)-Math.abs(o))/g);o<h?l+=s:l-=s;const a=Math.abs(Math.trunc(l+o))<h?Math.trunc(l+o):h;this.applyStyle(t,e,a)}if("true"===f&&"up"===S&&y>=0)if(l=0,r=0,M<=0){const s=Math.abs((Math.abs(h)-Math.abs(o))/g);h<o?a+=s:a-=s;const r=Math.abs(Math.trunc(a+h))<o?Math.trunc(a+h):o;this.applyStyle(t,e,r)}else{const a=Math.abs((Math.abs(o)-Math.abs(i))/g);o>i?s-=a:s+=a;const r=Math.abs(Math.trunc(s+o))<i?Math.trunc(s+o):i;this.applyStyle(t,e,r)}};effectsOnScroll=()=>{Object.entries(this.scrollData).forEach((([t,e])=>{const s=document.getElementById(t);Object.entries(e).forEach((([t])=>{this.scrollTransform(s,t)}))}))};startingEffect(){Object.entries(this.scrollData).forEach((([t,e])=>{let s="";const a=document.getElementById(t);Object.entries(e).forEach((([t,e])=>{const{speedValue:r,easingValue:l,delayValue:n}=this.getScrollSetting(e);switch(t){case"vertical":s+=`top ${r}ms ${l} ${n}ms, `;break;case"horizontal":s+=`left ${r}ms ${l} ${n}ms, `;break;case"rotate":case"scale":s+=`transform ${r}ms ${l} ${n}ms, `;break;case"fade":s+=`opacity ${r}ms ${l} ${n}ms, `;break;case"blur":s+=`filter ${r}ms ${l} ${n}ms, `}this.startingTransform(a,t)})),""!==s&&(a.style.transition=s.substring(0,s.length-2))}))}}window.addEventListener("DOMContentLoaded",(()=>{new ScrollEffects}));
