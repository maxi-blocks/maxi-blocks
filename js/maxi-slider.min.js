console.log("MaxiSlider in da house!");class MaxiSlider{constructor(t){this._container=t,this._wrapper=this._container.querySelector(".maxi-slider-block__wrapper"),this._slides=Array.from(this._wrapper.getElementsByClassName("maxi-slide-block")).map(((t,i)=>new Slide(t,i))),this.isLoop="true"===this._container.dataset.infiniteLoop,this._arrowNext=this._container.querySelector(".maxi-slider-block__arrow--next"),this._arrowPrev=this._container.querySelector(".maxi-slider-block__arrow--prev"),this.currentSlide=0,this.initPosition,this.dragPosition,this.endPosition,this.realFirstElOffset=0,this.onDragStart=this.dragStart.bind(this),this.onDragAction=this.dragAction.bind(this),this.onDragEnd=this.dragEnd.bind(this),this.init()}get currentSlide(){return this._currentSlide}set currentSlide(t){this._currentSlide=t}get activeSlidePosition(){return this._currentSlide<0?this.realFirstElOffset-this._slides.slice(this.currentSlide).map((t=>t.size.width))?.reduce(((t,i)=>t+i)):0===this.currentSlide?this.realFirstElOffset:this._slides.slice(0,this.currentSlide).map((t=>t.size.width))?.reduce(((t,i)=>t+i))+this.realFirstElOffset||this.realFirstElOffset}get wrapperTranslate(){return+this._wrapper.style.transform.replace("translateX(","").replace("-","").replace(")","").replace("px","")}set wrapperTranslate(t){this._wrapper.style.transform=`translateX(-${t}px)`}init(){this.isLoop&&this.insertSlideClones(2),this.wrapperTranslate=this.realFirstElOffset,this.navEvents(),this.wrapperEvents()}navEvents(){this._arrowNext.addEventListener("click",this.slideNext.bind(this)),this._arrowPrev.addEventListener("click",this.slidePrev.bind(this))}wrapperEvents(){this._wrapper.addEventListener("mousedown",this.onDragStart),this._wrapper.addEventListener("touchstart",this.onDragStart),this._wrapper.addEventListener("touchmove",this.onDragAction),this._wrapper.addEventListener("touchend",this.onDragEnd),this._wrapper.addEventListener("transitionend",this.transitionEnd.bind(this))}insertSlideClones(t){for(let i=0;i<t;i+=1){let t=this.getSlideClone(i),e=this.getSlideClone(this._slides.length-1-i);this._wrapper.append(t),this._wrapper.prepend(e),this.realFirstElOffset+=e.getBoundingClientRect().width,this.lastSlideTranslate+=e.getBoundingClientRect().width}}getSlideClone(t){let i=this._slides[t]._slide.cloneNode(!0);return i.classList.add("maxi-slide-block--clone"),i}dragStart(t){(t=t||window.event).preventDefault(),this._wrapper.style.transition="","touchstart"==t.type?this.initPosition=t.touches[0].clientX:(this.initPosition=t.clientX,document.addEventListener("mousemove",this.onDragAction),document.addEventListener("mouseup",this.onDragEnd)),this.dragPosition=this.initPosition}dragAction(t){let i;t=t||window.event,this.currentSlide+1>=this._slides.length&&this.dragPosition<this.initPosition?(this.currentSlide=this.currentSlide-this._slides.length,this.sliderAction(!1)):this.currentSlide<=0&&this.dragPosition>this.initPosition&&(this.currentSlide=this.currentSlide+this._slides.length,this.sliderAction(!1)),"touchmove"==t.type?(i=this.dragPosition-t.touches[0].clientX,this.dragPosition=t.touches[0].clientX):(i=this.dragPosition-t.clientX,this.dragPosition=t.clientX),this.wrapperTranslate=this.wrapperTranslate+i}dragEnd(t){"touchend"==t.type?this.endPosition=this.dragPosition:this.endPosition=t.clientX,this.endPosition-this.initPosition<-100?this.slideNext():this.endPosition-this.initPosition>100?this.slidePrev():this.sliderAction(),document.removeEventListener("mousemove",this.onDragAction),document.removeEventListener("mouseup",this.onDragEnd)}slideNext(){(this.currentSlide+1<this._slides.length||this.isLoop)&&(this.currentSlide=this.currentSlide+1),this.sliderAction()}slidePrev(){(this.currentSlide-1>=0||this.isLoop)&&(this.currentSlide=this.currentSlide-1),this.sliderAction()}sliderAction(t=!0){this._slides.forEach((t=>t.isActive=this.currentSlide)),t&&(this._wrapper.style.transition="transform 0.2s ease-out"),this.wrapperTranslate=this.activeSlidePosition}loop(){this.currentSlide>=this._slides.length&&(this.currentSlide=0,this.sliderAction(!1)),this.currentSlide<0&&(this.currentSlide=this._slides.length-1,this.sliderAction(!1))}transitionEnd(){this._wrapper.style.transition="",this.isLoop&&this.loop()}}class Slide{constructor(t,i){this._slide=t,this._id=i,this.isActive=0,this.size=this._slide.getBoundingClientRect()}get isActive(){return this._isActive}set isActive(t){this._isActive=this._id===t,this._slide.classList.toggle("slider-item--active",this._isActive)}get size(){return this._size}set size(t){this._size=t}}document.addEventListener("DOMContentLoaded",(()=>Array.from(document.getElementsByClassName("maxi-slider-block")).forEach((t=>new MaxiSlider(t)))),!1);
