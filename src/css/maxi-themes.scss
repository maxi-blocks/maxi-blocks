/**
* Default and variables
*/
$styles: 'dark', 'light';
$levels: 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6';
$responsive_sizes: 'xxl', 'xl', 'l', 'm', 's', 'xs';
$responsive_breakpoints: 1921, 1920, 1366, 1024, 768, 480;
$color_set: '1', '2', '3', '4', '5', '6', '7', '8';

// Typography properties list
$typography_props: (
	'font-family',
	'font-size',
	'line-height',
	'letter-spacing',
	'font-weight',
	'text-transform',
	'font-style',
	'text-decoration',
	'white-space',
	'word-spacing',
	'margin-bottom',
	'text-indent'
);

/**
* Backend - Color Palette
*/
body.maxi-blocks--active {
	@each $style in $styles {
		.maxi-color-palette--#{$style} {
			@each $color_number in $color_set {
				.maxi-color-control__palette
					.maxi-color-control__palette-box
					.maxi-color-control__palette-item__#{$color_number} {
					background-color: rgba(
						var(--maxi-#{$style}-color-#{$color_number}),
						1
					);
				}
			}
		}
	}
}

/**
* OPTIMIZED: Define typography structure ONCE, override values per breakpoint
* This replaces ~1000 lines with ~150 lines by using CSS variable cascading
*/

// Base typography structure - properties defined once
.maxi-text-block__content {
	font-family: var(--sc-font-family);
	font-size: var(--sc-font-size);
	line-height: var(--sc-line-height);
	letter-spacing: var(--sc-letter-spacing);
	font-weight: var(--sc-font-weight);
	text-transform: var(--sc-text-transform);
	font-style: var(--sc-font-style);
	text-decoration: var(--sc-text-decoration);
	white-space: var(--sc-white-space);
	word-spacing: var(--sc-word-spacing);
	margin-bottom: var(--sc-margin-bottom);
	text-indent: var(--sc-text-indent);
}

// Button content structure
.maxi-button-block__content {
	font-family: var(--sc-btn-font-family, var(--sc-font-family));
	font-size: var(--sc-btn-font-size);
	line-height: var(--sc-btn-line-height);
	letter-spacing: var(--sc-btn-letter-spacing);
	font-weight: var(--sc-btn-font-weight);
	text-transform: var(--sc-btn-text-transform);
	font-style: var(--sc-btn-font-style);
	text-decoration: var(--sc-btn-text-decoration);
	white-space: var(--sc-btn-white-space);
	word-spacing: var(--sc-btn-word-spacing);
	text-indent: var(--sc-btn-text-indent);
}

// Figcaption, search, and hover details inherit p-level typography
.maxi-image-block figcaption,
.maxi-search-block__input,
.maxi-search-block__button__content,
.maxi-hover-details p {
	font-family: var(--sc-font-family);
	font-size: var(--sc-font-size);
	line-height: var(--sc-line-height);
	letter-spacing: var(--sc-letter-spacing);
	font-weight: var(--sc-font-weight);
	text-transform: var(--sc-text-transform);
	font-style: var(--sc-font-style);
	text-decoration: var(--sc-text-decoration);
	white-space: var(--sc-white-space);
	word-spacing: var(--sc-word-spacing);
	text-indent: var(--sc-text-indent);
}

// Hover details h4 uses h4-level typography
.maxi-hover-details h4 {
	font-family: var(--sc-h4-font-family);
	font-size: var(--sc-h4-font-size);
	line-height: var(--sc-h4-line-height);
	letter-spacing: var(--sc-h4-letter-spacing);
	font-weight: var(--sc-h4-font-weight);
	text-transform: var(--sc-h4-text-transform);
	font-style: var(--sc-h4-font-style);
	text-decoration: var(--sc-h4-text-decoration);
	white-space: var(--sc-h4-white-space);
	word-spacing: var(--sc-h4-word-spacing);
	margin-bottom: var(--sc-h4-margin-bottom);
	text-indent: var(--sc-h4-text-indent);
}

// List blocks
.maxi-list-block ul.maxi-text-block__content,
.maxi-list-block ol.maxi-text-block__content {
	margin-bottom: var(--sc-margin-bottom);
}

.maxi-text-block li,
.maxi-text-block li.maxi-text-block__content {
	font-family: var(--sc-font-family);
	font-size: var(--sc-font-size);
	line-height: var(--sc-line-height);
	letter-spacing: var(--sc-letter-spacing);
	white-space: var(--sc-white-space);
	word-spacing: var(--sc-word-spacing);
}

/**
* Responsive variable value overrides
* Only sets variable VALUES, not property declarations
*/
@mixin set-typography-vars($style, $level, $responsive_size) {
	--sc-font-family: var(--maxi-#{$style}-#{$level}-font-family-#{$responsive_size});
	--sc-font-size: var(--maxi-#{$style}-#{$level}-font-size-#{$responsive_size});
	--sc-line-height: var(--maxi-#{$style}-#{$level}-line-height-#{$responsive_size});
	--sc-letter-spacing: var(--maxi-#{$style}-#{$level}-letter-spacing-#{$responsive_size});
	--sc-font-weight: var(--maxi-#{$style}-#{$level}-font-weight-#{$responsive_size});
	--sc-text-transform: var(--maxi-#{$style}-#{$level}-text-transform-#{$responsive_size});
	--sc-font-style: var(--maxi-#{$style}-#{$level}-font-style-#{$responsive_size});
	--sc-text-decoration: var(--maxi-#{$style}-#{$level}-text-decoration-#{$responsive_size});
	--sc-white-space: var(--maxi-#{$style}-#{$level}-white-space-#{$responsive_size});
	--sc-word-spacing: var(--maxi-#{$style}-#{$level}-word-spacing-#{$responsive_size});
	--sc-margin-bottom: var(--maxi-#{$style}-#{$level}-margin-bottom-#{$responsive_size});
	--sc-text-indent: var(--maxi-#{$style}-#{$level}-text-indent-#{$responsive_size});
}

@mixin set-button-vars($style, $responsive_size) {
	--sc-btn-font-family: var(--maxi-#{$style}-button-font-family-#{$responsive_size}, var(--maxi-#{$style}-p-font-family-#{$responsive_size}));
	--sc-btn-font-size: var(--maxi-#{$style}-button-font-size-#{$responsive_size});
	--sc-btn-line-height: var(--maxi-#{$style}-button-line-height-#{$responsive_size});
	--sc-btn-letter-spacing: var(--maxi-#{$style}-button-letter-spacing-#{$responsive_size});
	--sc-btn-font-weight: var(--maxi-#{$style}-button-font-weight-#{$responsive_size});
	--sc-btn-text-transform: var(--maxi-#{$style}-button-text-transform-#{$responsive_size});
	--sc-btn-font-style: var(--maxi-#{$style}-button-font-style-#{$responsive_size});
	--sc-btn-text-decoration: var(--maxi-#{$style}-button-text-decoration-#{$responsive_size});
	--sc-btn-white-space: var(--maxi-#{$style}-button-white-space-#{$responsive_size});
	--sc-btn-word-spacing: var(--maxi-#{$style}-button-word-spacing-#{$responsive_size});
	--sc-btn-text-indent: var(--maxi-#{$style}-button-text-indent-#{$responsive_size});
}

@mixin set-h4-vars($style, $responsive_size) {
	--sc-h4-font-family: var(--maxi-#{$style}-h4-font-family-#{$responsive_size});
	--sc-h4-font-size: var(--maxi-#{$style}-h4-font-size-#{$responsive_size});
	--sc-h4-line-height: var(--maxi-#{$style}-h4-line-height-#{$responsive_size});
	--sc-h4-letter-spacing: var(--maxi-#{$style}-h4-letter-spacing-#{$responsive_size});
	--sc-h4-font-weight: var(--maxi-#{$style}-h4-font-weight-#{$responsive_size});
	--sc-h4-text-transform: var(--maxi-#{$style}-h4-text-transform-#{$responsive_size});
	--sc-h4-font-style: var(--maxi-#{$style}-h4-font-style-#{$responsive_size});
	--sc-h4-text-decoration: var(--maxi-#{$style}-h4-text-decoration-#{$responsive_size});
	--sc-h4-white-space: var(--maxi-#{$style}-h4-white-space-#{$responsive_size});
	--sc-h4-word-spacing: var(--maxi-#{$style}-h4-word-spacing-#{$responsive_size});
	--sc-h4-margin-bottom: var(--maxi-#{$style}-h4-margin-bottom-#{$responsive_size});
	--sc-h4-text-indent: var(--maxi-#{$style}-h4-text-indent-#{$responsive_size});
}

/* Style cards backend - responsive overrides */
body.maxi-blocks--active {
	@each $responsive_size in $responsive_sizes {
		$current_responsive_attribute: '[maxi-blocks-responsive=#{$responsive_size}]';

		.edit-post-visual-editor#{$current_responsive_attribute},
		&.editor-styles-wrapper#{$current_responsive_attribute} {
			@each $style in $styles {
				.maxi-#{$style} {
					// Text block levels
					@each $level in $levels {
						#{$level}.maxi-text-block__content {
							@include set-typography-vars($style, $level, $responsive_size);
						}
					}

					// List items use p-level
					li, li.maxi-text-block__content {
						@include set-typography-vars($style, 'p', $responsive_size);
					}

					// Button
					.maxi-button-block__content {
						@include set-button-vars($style, $responsive_size);
					}

					// Elements that use p-level typography
					.maxi-image-block figcaption,
					.maxi-search-block__input,
					.maxi-search-block__button__content,
					.maxi-hover-details p,
					.maxi-list-block ul.maxi-text-block__content,
					.maxi-list-block ol.maxi-text-block__content {
						@include set-typography-vars($style, 'p', $responsive_size);
					}

					// Hover details h4
					.maxi-hover-details h4 {
						@include set-h4-vars($style, $responsive_size);
					}
				}
			}
		}
	}
}
