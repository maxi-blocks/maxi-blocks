/**
 * Clip Path Control Editor Styles
 * Optimized version with reusable mixins and better organization
 */

// ================================
// Variables and Mixins
// ================================

/**
 * Standard dimensions used throughout clip path controls
 */
// SCSS variables converted to CSS custom properties - see core/admin/_variables.css
// $clip-path-icon-size: 18px; → --maxi-space-18px
// $clip-path-handle-size: 0.75rem; → --maxi-space-0-75rem
// $clip-path-handle-size-hover: 1rem; → --maxi-space-1rem
// $clip-path-delete-handle-size: 1rem; → --maxi-space-1rem
// $clip-path-border-radius: 6px; → --maxi-radius-6px

/**
 * Mixin for centered flex containers
 */
@mixin flex-center {
	display: var(--maxi-display-flex);
	align-items: var(--maxi-layout-center);
	justify-content: var(--maxi-layout-center);
}

/**
 * Mixin for circular elements with enhanced visibility
 */
@mixin circular-element($size) {
	width: $size;
	height: $size;
	border-radius: var(--maxi-radius-round);
}

/**
 * Mixin for enhanced clip-path control dots with better visibility
 */
@mixin enhanced-clip-path-dot {
	@include circular-element(var(--maxi-space-0-75rem));
	box-shadow: var(--maxi-space-0px) var(--maxi-space-2px)
			var(--maxi-space-8px) rgba(0, 0, 0, 0.15),
		var(--maxi-space-0px) var(--maxi-space-0px) var(--maxi-space-0px)
			var(--maxi-space-2px) var(--maxi-white),
		var(--maxi-space-0px) var(--maxi-space-0px) var(--maxi-space-0px)
			var(--maxi-space-3px) rgba(var(--maxi-secondary-color), 0.8);
	transition: all var(--maxi-transition-200ms) ease;
	cursor: var(--maxi-cursor-grab);
	z-index: var(--maxi-z-maximum);

	&:hover {
		@include circular-element(var(--maxi-space-1rem));
		box-shadow: var(--maxi-space-0px) var(--maxi-space-4px)
				var(--maxi-space-12px) rgba(0, 0, 0, 0.25),
			var(--maxi-space-0px) var(--maxi-space-0px) var(--maxi-space-0px)
				var(--maxi-space-2px) var(--maxi-white),
			var(--maxi-space-0px) var(--maxi-space-0px) var(--maxi-space-0px)
				var(--maxi-space-4px) var(--maxi-secondary-color);
		transform: translate(-50%, -50%) scale(1.1);
		cursor: var(--maxi-cursor-grab);
	}

	&:active {
		cursor: var(--maxi-cursor-grab);
		transform: translate(-50%, -50%) scale(0.95);
	}
}

/**
 * Mixin for interactive button states
 */
@mixin interactive-button-base {
	border: var(--maxi-border-1-5px) solid var(--maxi-grey-light);
	border-radius: var(--maxi-radius-4px);
	cursor: var(--maxi-cursor-pointer);
	transition: all var(--maxi-transition-400ms) ease;
}

/**
 * Mixin for button hover/active states
 */
@mixin button-active-state {
	background: var(--maxi-pastel-green);
	border: var(--maxi-border-1px) solid var(--maxi-primary-color) !important;
}

/**
 * Mixin for icon/path color states
 */
@mixin icon-color-states($default-color, $active-color) {
	background-color: $default-color;

	path {
		fill: $default-color;
	}

	.clip-path-defaults__clip-path {
		background-color: $default-color;
	}

	&:hover,
	&[aria-pressed='true'] {
		background-color: $active-color;

		path {
			fill: $active-color !important;
		}

		.clip-path-defaults__clip-path {
			background-color: $active-color;
		}
	}
}

// ================================
// Main Clip Path Control
// ================================

.maxi-clip-path-control {
	// ================================
	// Default Clip Path Items
	// ================================

	.clip-path-defaults {
		display: var(--maxi-display-flex);
		flex-wrap: wrap;
		justify-content: var(--maxi-layout-space-between);
		margin-bottom: var(--maxi-space-8px);
		gap: var(--maxi-space-5px);

		&__items__none {
			@include flex-center;
		}

		&__items {
			@include flex-center;
			@include interactive-button-base;
			position: var(--maxi-layout-relative);
			width: var(--maxi-space-28px);
			height: var(--maxi-space-30px);
			margin: var(--maxi-space-0px);
			padding: var(--maxi-space-3px);

			&[aria-pressed='true'],
			&:hover {
				@include button-active-state;
			}
		}

		&__clip-path {
			@include icon-color-states(
				var(--maxi-grey-light),
				var(--maxi-secondary-color)
			);
			width: var(--maxi-space-18px);
			height: var(--maxi-space-18px);
			transform: var(--maxi-transform-translateZ-0);
			margin: var(--maxi-layout-auto);
		}

		svg {
			width: var(--maxi-space-18px);
			height: var(--maxi-space-18px);

			path {
				fill: var(--maxi-grey-light);
			}
		}
	}

	// ================================
	// Clip Path Controller
	// ================================

	.maxi-clip-path-controller {
		display: var(--maxi-display-flex);
		position: var(--maxi-layout-relative);

		&__handle {
			display: var(--maxi-display-flex);
			align-items: var(--maxi-layout-center);
			padding-bottom: var(--maxi-space-0-75rem);

			span {
				display: var(--maxi-display-block);
				border-radius: var(--maxi-radius-round);
			}

			&.maxi-clip-path-color-handle {
				margin-right: var(--maxi-space-0-5rem);

				span {
					@include circular-element(var(--maxi-space-0-75rem));
				}
			}

			&.maxi-clip-path-delete-handle {
				position: var(--maxi-layout-absolute);
				left: var(--maxi-space-0px);
				bottom: var(--maxi-space-0px);

				span {
					@include circular-element(var(--maxi-space-1rem));
					position: var(--maxi-layout-relative);
					background-color: var(--maxi-orange-red);
					cursor: var(--maxi-cursor-pointer);

					&:hover {
						background-color: var(--maxi-primary-color);
						transform: scale(1.1);
					}

					&:before {
						content: '';
						position: var(--maxi-layout-absolute);
						top: var(--maxi-layout-half);
						left: var(--maxi-layout-half);
						transform: translate(-50%, -50%);
						width: var(--maxi-layout-50-percent);
						height: var(--maxi-space-0-1rem);
						background-color: var(--maxi-white);
						transition: all var(--maxi-transition-300ms) ease;
					}
				}
			}
		}

		&__item {
			width: var(--maxi-layout-full-width);

			.maxi-base-control {
				margin-bottom: var(--maxi-space-5px);

				&__field {
					width: var(--maxi-layout-full-width);
					display: var(--maxi-display-flex);

					.maxi-base-control__label {
						margin-right: var(--maxi-space-10px);
						min-width: var(--maxi-space-65px) !important;
					}

					input {
						width: var(--maxi-space-60px);
					}
				}
			}
		}
	}

	// ================================
	// Visual Editor
	// ================================

	.maxi-clip-path-visual-editor {
		background-color: var(--maxi-white) !important;
		position: var(--maxi-layout-relative);
		width: var(--maxi-layout-full-width);
		margin: var(--maxi-space-10px) var(--maxi-space-10px)
			var(--maxi-space-10px) var(--maxi-space-0px);
		min-height: var(--maxi-control-height-291px);
		overflow: var(--maxi-overflow-visible);
		border: var(--maxi-border-1px) solid var(--maxi-grey-light);
		border-radius: var(--maxi-radius-6px);

		&-wrapper {
			border: var(--maxi-border-2px) solid var(--maxi-secondary-color) !important;
			border-radius: var(--maxi-space-5px);
		}

		&__preview {
			background-color: var(--maxi-pastel-green) !important;
			position: var(--maxi-layout-absolute);
			top: var(--maxi-space-0px);
			left: var(--maxi-space-0px);
			width: var(--maxi-layout-full-width);
			height: var(--maxi-layout-full-width);
		}
	}

	// ================================
	// Clip Path Buttons (Enhanced Visibility)
	// ================================

	.maxi-clip-path-button {
		@include enhanced-clip-path-dot;
		background-color: var(--maxi-secondary-color);
		position: var(--maxi-layout-absolute);
		transform: translate(-50%, -50%);

		&--radius {
			// For radius buttons, use border instead of solid background for visibility
			background-color: var(--maxi-reset-background);
			border: var(--maxi-border-3px) solid var(--maxi-secondary-color);
			box-shadow: var(--maxi-space-0px) var(--maxi-space-2px)
					var(--maxi-space-8px) rgba(0, 0, 0, 0.15),
				var(--maxi-space-0px) var(--maxi-space-0px)
					var(--maxi-space-0px) var(--maxi-space-2px)
					var(--maxi-white);

			&:hover {
				border-color: var(--maxi-primary-color);
				border-width: var(--maxi-border-4px);
				box-shadow: var(--maxi-space-0px) var(--maxi-space-4px)
						var(--maxi-space-12px) rgba(0, 0, 0, 0.25),
					var(--maxi-space-0px) var(--maxi-space-0px)
						var(--maxi-space-0px) var(--maxi-space-2px)
						var(--maxi-white);
			}

			&__hidden {
				@include circular-element(var(--maxi-space-0-75rem));
				position: var(--maxi-layout-absolute);
				transform: translate(-50%, -50%);
				z-index: var(--maxi-z-elevated);
				background-color: var(--maxi-reset-background);
				border: var(--maxi-reset-border-none);
				box-shadow: var(--maxi-reset-box-shadow);
				cursor: var(--maxi-cursor-grab);

				&:hover {
					background-color: rgba(var(--maxi-secondary-color), 0.1);
				}
			}
		}

		&--single {
			top: var(--maxi-layout-half);
			left: var(--maxi-layout-half);
		}

		&--opposite {
			// Style for opposite/mirror points
			opacity: var(--maxi-opacity-medium);

			&:hover {
				opacity: var(--maxi-opacity-visible);
			}
		}

		&__hidden-tooltip {
			display: var(--maxi-display-block);
		}
	}
}

// ================================
// Standalone Components
// ================================

.maxi-clip-path-add-point-button {
	background-color: var(--maxi-white) !important;
	border: var(--maxi-border-1-5px) solid var(--maxi-grey-light) !important;
	color: var(--maxi-black) !important;
	font-weight: var(--maxi-font-weight-bold);
	border-radius: var(--maxi-radius-6px);
	margin-bottom: var(--maxi-space-20px) !important;

	&:hover {
		background-color: var(--maxi-whisper-green) !important;
		border-color: var(--maxi-secondary-color) !important;
	}
}

.maxi-clip-path-control .button {
	border-radius: var(--maxi-radius-6px);
}

// ================================
// RTL Support
// ================================

html[dir='rtl'] {
	.maxi-clip-path-delete-handle {
		left: var(--maxi-layout-unset);
		right: var(--maxi-space-0px);
	}
}
