/*===============================================
  TYPOGRAPHY CONTROL COMPONENT
===============================================*/

.maxi-typography-control {
	/*-------------------------------------------
	  COMPONENT VARIABLES
	-------------------------------------------*/
	--typography-spacing-standard: var(--maxi-space-15px);
	--typography-button-transition: all var(--maxi-transition-200ms) ease;
	--typography-interactive-border: var(--maxi-border-1px) solid
		var(--maxi-grey-light);
	--typography-button-radius: var(--maxi-radius-4px);

	/*-------------------------------------------
	  SHARED COMPONENT PATTERNS
	-------------------------------------------*/

	// Floating label pattern
	%floating-label {
		position: var(--maxi-layout-absolute) !important;
		top: var(--maxi-floating-label-top) !important;
		left: var(--maxi-floating-label-left) !important;
		font-size: var(--maxi-font-size-10px) !important;
		color: var(--maxi-grey-dark) !important;
		font-style: normal !important;
		background: var(--maxi-white) !important;
		padding: var(--maxi-floating-label-padding) !important;
		pointer-events: none !important;
		box-sizing: border-box !important;
		z-index: var(--maxi-z-maximum) !important;
	}

	// Shared flexbox center pattern
	%flex-center-pattern {
		display: var(--maxi-display-flex);
		align-items: var(--maxi-layout-center);
		justify-content: var(--maxi-layout-center);
	}

	// Shared button base styling
	%button-base-pattern {
		@extend %flex-center-pattern;
		border: var(--typography-interactive-border) !important;
		border-radius: var(--typography-button-radius) !important;
		background: var(--maxi-white) !important;
		color: var(--maxi-black) !important;
		cursor: pointer !important;
		transition: var(--typography-button-transition) !important;
		box-sizing: border-box !important;

		&:hover {
			border-color: var(--maxi-primary-color) !important;
			background: var(--maxi-light-blue) !important;
		}
	}

	// Shared interactive states for tabs
	%tabs-interactive-states {
		&:hover {
			background-color: var(--maxi-whisper-green);
			border-color: var(--maxi-primary-color) !important;
		}

		&[aria-pressed='true'] {
			background-color: var(--maxi-whisper-green) !important;
			border-color: var(--maxi-primary-color) !important;
			color: var(--maxi-primary-color) !important;
		}
	}

	/*-------------------------------------------
	  BASE CONTROL CONFIGURATION
	-------------------------------------------*/
	.maxi-base-control {
		flex: 1;

		&__help {
			color: var(--maxi-grey);
			font-size: var(--maxi-font-size-12px);
		}

		.maxi-tabs-control__button--selected svg path {
			fill: var(--maxi-primary-color);
		}

		.maxi-tabs-control__button {
			margin-right: var(--maxi-space-11px);
			border-radius: var(--typography-button-radius);
			border: var(--maxi-border-1-5px) solid var(--maxi-grey-light);
			transition: all var(--maxi-transition-400ms) ease !important;
			@extend %tabs-interactive-states;
		}
	}

	/*-------------------------------------------
	  LINK OPTIONS & VARIANTS
	-------------------------------------------*/
	.maxi-typography-control__link-options {
		margin-left: var(--maxi-space-6px);

		.maxi-tabs-control__button--selected {
			font-weight: var(--maxi-font-weight-bold);
			color: var(--maxi-secondary-color) !important;
		}
	}

	/*-------------------------------------------
	  WEIGHT & SIZE ROW LAYOUT
	-------------------------------------------*/
	.maxi-typography-control__weight-size-row {
		display: var(--maxi-display-flex);
		flex-wrap: wrap;
		gap: var(--maxi-space-10px);
		width: var(--maxi-layout-full-width);

		> div {
			flex: 1;
			position: var(--maxi-layout-relative);
		}

		&:has(.maxi-typography-control__weight-warning) {
			flex-direction: var(--maxi-layout-flex-column);

			.maxi-base-control__field > div {
				display: var(--maxi-display-flex) !important;
				width: 79% !important;
				margin-bottom: calc(-1 * var(--maxi-space-20px)) !important;
			}

			.maxi-advanced-number-control__value {
				flex: 1 1 auto !important;
			}
		}
	}

	/*-------------------------------------------
	  TYPOGRAPHY CONTROLS POSITIONING
	-------------------------------------------*/
	.maxi-typography-control__size {
		margin-top: var(--maxi-space-3px) !important;
	}

	.maxi-typography-control__weight,
	.maxi-typography-control__size {
		position: var(--maxi-layout-relative) !important;

		.maxi-base-control {
			position: var(--maxi-layout-relative);

			&__label {
				@extend %floating-label;
			}
		}
	}

	/*-------------------------------------------
	  SPACING CONTROLS LAYOUT
	-------------------------------------------*/
	.maxi-typography-control__spacing-controls {
		margin-bottom: var(--typography-spacing-standard) !important;

		.maxi-typography-control__line-height,
		.maxi-typography-control__bottom-gap {
			display: inline-block !important;
			width: calc(
				var(--maxi-layout-half) - var(--maxi-space-5px)
			) !important;
			vertical-align: top !important;
			position: var(--maxi-layout-relative) !important;
		}

		.maxi-typography-control__line-height {
			margin-right: var(--maxi-space-10px) !important;
		}

		.maxi-base-control__field {
			gap: var(--maxi-space-5px) !important;
		}

		.maxi-advanced-number-control__value {
			width: var(--maxi-control-width-70px);
		}

		.maxi-dimensions-control__units select {
			min-width: var(--maxi-space-50px) !important;
			max-width: var(--maxi-space-50px) !important;
			width: var(--maxi-space-50px) !important;
		}

		.maxi-base-control__label {
			@extend %floating-label;
		}
	}

	/*-------------------------------------------
	  FORMATTING BUTTONS
	-------------------------------------------*/
	.maxi-typography-control__formatting-buttons {
		display: var(--maxi-display-flex) !important;
		gap: var(--maxi-space-5px) !important;
		margin-bottom: var(--typography-spacing-standard) !important;
		justify-content: var(--maxi-layout-flex-start) !important;
		align-items: var(--maxi-layout-center) !important;

		.maxi-typography-control__format-button {
			@extend %button-base-pattern;
			padding: var(--maxi-space-8px) !important;
			min-width: var(--maxi-space-34px) !important;
			max-width: var(--maxi-space-34px) !important;
			height: var(--maxi-control-height-36px) !important;
			font-family: var(--maxi-font-inherit) !important;
			font-size: var(--maxi-font-size-16px) !important;
			font-weight: var(--maxi-font-weight-normal) !important;
			line-height: 1 !important;
			text-align: var(--maxi-text-align-center) !important;
			text-decoration: none !important;
			margin: var(--maxi-space-0px) !important;
			margin-top: calc(
				-1 * var(--typography-spacing-standard)
			) !important;

			&[aria-pressed='true'] {
				background: var(--maxi-whisper-green) !important;
				color: var(--maxi-primary-color) !important;
				border-color: var(--maxi-primary-color) !important;
			}

			&--bold {
				font-weight: var(--maxi-font-weight-bold) !important;
			}

			&--italic {
				font-style: var(--maxi-font-style-italic) !important;
			}

			&--underline {
				text-decoration: var(
					--maxi-text-decoration-underline
				) !important;
			}

			&--strikethrough {
				text-decoration: line-through !important;
			}

			&--capitalize,
			&--uppercase,
			&--lowercase {
				font-size: var(--maxi-font-size-16px) !important;
				font-weight: var(--maxi-font-weight-medium) !important;
			}
		}
	}

	/*-------------------------------------------
	  SEPARATORS & ADVANCED TOGGLES
	-------------------------------------------*/
	.maxi-typography-control__separator {
		border: var(--maxi-reset-border-none) !important;
		border-top: var(--typography-interactive-border) !important;
		margin: var(--maxi-space-14px) var(--maxi-space-0px) !important;
		height: var(--maxi-space-0px) !important;
		background: var(--maxi-reset-background) !important;
	}

	.maxi-typography-control__advanced-toggle {
		.components-button {
			@extend %button-base-pattern;
			justify-content: var(--maxi-layout-space-between) !important;
			width: var(--maxi-layout-full-width) !important;
			padding: var(--maxi-space-8px) var(--maxi-space-10px) !important;
			margin-bottom: var(--typography-spacing-standard) !important;
			font-size: var(--maxi-font-size-14px) !important;
		}
	}

	/*-------------------------------------------
	  ADVANCED CONTROLS & ANIMATIONS
	-------------------------------------------*/
	.maxi-typography-control__toggle-arrow {
		transition: transform var(--maxi-transition-200ms) ease;
		transform: var(--maxi-transform-rotate-0);

		&--expanded {
			transform: rotate(180deg);
		}
	}

	.maxi-typography-control-button {
		@extend %flex-center-pattern;
		justify-content: var(--maxi-layout-space-between);
		width: var(--maxi-layout-full-width);
		text-align: var(--maxi-text-align-left);
		margin-top: var(--maxi-space-10px);
	}

	.maxi-typography-control-arrow-span {
		transition: transform var(--maxi-transition-300ms) ease;
	}

	.maxi-typography-control__advanced-options {
		margin-top: var(--maxi-space-0px) !important;
		animation: slideDown var(--maxi-transition-300ms) ease-out;

		@keyframes slideDown {
			from {
				opacity: var(--maxi-opacity-hidden);
				transform: translateY(calc(-1 * var(--maxi-space-10px)));
			}
			to {
				opacity: var(--maxi-opacity-visible);
				transform: translateY(var(--maxi-space-0px));
			}
		}
	}

	/*-------------------------------------------
	  ALIGNMENT & SPACING
	-------------------------------------------*/
	.maxi-typography-control__alignment-buttons {
		margin-bottom: var(--maxi-space-8px);
	}
}

/*===============================================
  EXTERNAL ALIGNMENT CONTROLS
===============================================*/
.maxi-typography-control__alignment-buttons
	.maxi-typography-panel__text-alignment {
	margin-left: var(--maxi-space-7px);
	margin-right: var(--maxi-space-4px) !important;

	.maxi-tabs-control__button {
		margin-right: var(--maxi-space-5px) !important;

		&:last-child {
			margin-right: var(--maxi-space-4px) !important;
		}
	}
}

/*===============================================
  STYLE CARDS INTEGRATION
===============================================*/
.maxi-style-cards__popover,
.maxi-accordion-control__item,
.maxi-style-cards__sc,
[class*='maxi-style-cards'] {
	.maxi-typography-control[class*='maxi-style-cards-control__sc__'] {
		.maxi-advanced-number-control__value {
			width: var(--maxi-control-width-100px) !important;
		}

		.maxi-typography-control__formatting-buttons
			.maxi-typography-control__format-button {
			min-width: var(--maxi-control-height-43px) !important;
			height: var(--maxi-control-height-36px) !important;
			font-size: var(--maxi-font-size-16px) !important;
			padding: var(--maxi-space-6px) var(--maxi-space-10px) !important;
		}

		.maxi-base-control {
			margin-bottom: var(--maxi-space-10px) !important;

			&__field {
				gap: var(--maxi-space-5px) !important;
				margin-bottom: var(--maxi-space-0px) !important;
			}
		}

		.maxi-advanced-number-control .maxi-base-control {
			margin-bottom: var(--maxi-space-0px) !important;
		}
	}
}

/*===============================================
  TYPOGRAPHY PANEL INTEGRATION
===============================================*/
.maxi-typography-panel__font-level {
	margin: var(--maxi-space-0px) var(--maxi-space-7px);
}
